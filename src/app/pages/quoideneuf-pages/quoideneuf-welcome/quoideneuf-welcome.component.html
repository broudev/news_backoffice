<div class="hero-header ">
    <div class="container-fluid">
        <!-- Row start -->
        <div class="row gx-3">
            <div class="col-xxl-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row gx-3">
                            <div class="col-xl-4 col-sm-6 col-12">
                                <div class="d-flex box-bdr-blue rounded-2 align-items-center p-3  mb-3">
                                    <div class="box-bdr-blue p-3 rounded-2">
                                        <mat-icon>feed</mat-icon>
                                    </div>
                                    <div class="ms-4">
                                        <div id="received"></div>
                                        <h3 class="fw-bolder fs-6">{{ all_article }}</h3>
                                        <p class="m-0 fw-bolder text-primary">Tous les articles</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-sm-6 col-12">

                                <div class="d-flex box-bdr-green rounded-2 align-items-center p-3 mb-3">
                                    <div class="box-bdr-green p-3 rounded-2">
                                        <mat-icon class="text-green">feed</mat-icon>
                                    </div>
                                    <div class="ms-4">
                                        <div id="processing"></div>
                                        <h3 class="fw-bolder fs-6">{{ article_ispublished }}</h3>
                                        <p class="m-0 text-primary fw-bolder">Articles publiés</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-sm-6 col-12">
                                <div class="d-flex box-bdr-red rounded-2 align-items-center p-3">
                                    <div class="box-bdr-red p-3 rounded-2">
                                        <mat-icon class="text-red font-2x">feed</mat-icon>
                                    </div>
                                    <div class="ms-4">
                                        <div id="delivered"></div>
                                        <h3 class="fw-bolder fs-6">{{ article_nopublished }}</h3>
                                        <p class="m-0 text-light">Articles non publiés</p>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="row gx-3">
                            <div class="col-lg-12">
                                <h1 class="text-start">Rapport hebdomadaire</h1>
                            </div>
                            <div class="col-lg-12">
                                <div class="d-flex flex-column p-4 rounded-2 box-bdr-green">
                                    <h4 class="mb-3">
                                        Nombre article : <span class="fw-bolder fs-6">{{ count_all_article }}</span>
                                    </h4>
                                    <div class="progress medium">
                                        <div class="progress-bar shade-green" role="progressbar" [style.width]="count_all_article +'%'"
                                        aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Row end -->
    </div>
</div>

<div class="hero-body">
    <!-- Row start -->

    <div class="row gx-3">
        <div class="col-xxl-12 col-sm-12 col-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between">
                    <div class="card-title">
                        Les articles récentes
                        <span>
                            <button *ngIf="news_is_founded > 0" mat-mini-fab color="primary" aria-label="Example icon button with a menu icon">

                                {{ news_is_founded }}
                            </button>
                        </span>
                    </div>
                    <button [routerLink]="['/quoideneufs.create-article']"   mat-raised-button  color="primary">Ecrire un article</button>
                </div>
                <div class="card-body">
                    <div class="row gx-3 mb-3">

                        <div class="col-lg-3">
                            <mat-form-field>
                                <mat-label>Date début</mat-label>
                                <input [(ngModel)]="date_debut" matInput [matDatepicker]="Date_debut">
                                <mat-datepicker-toggle matIconSuffix [for]="Date_debut"></mat-datepicker-toggle>
                                <mat-datepicker #Date_debut></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-3">
                            <mat-form-field>
                                <mat-label>Date fin</mat-label>
                                <input [(ngModel)]="date_fin" matInput [matDatepicker]="Date_fin">
                                <mat-datepicker-toggle matIconSuffix [for]="Date_fin"></mat-datepicker-toggle>
                                <mat-datepicker #Date_fin></mat-datepicker>
                            </mat-form-field>
                        </div>

                        <div class="col-lg-2">
                            <mat-form-field apparence="outlet">
                                <mat-label>Rubrique</mat-label>
                                <mat-select  multiple (selectionChange)="onChange_rubrique($event)">
                                  <mat-option *ngFor="let rubrique of list_rubrique" [value]="rubrique.id">{{ rubrique.rubrique }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-lg-2">
                            <mat-form-field apparence="outlet">
                                <mat-label>Genre</mat-label>
                                <mat-select  multiple (selectionChange)="onChange_genre($event)">
                                    <mat-option  *ngFor="let genre of list_genre" [value]="genre.id">{{ genre.genre }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-lg-2">
                            <button (click)="filterArticleData()"  mat-raised-button class="default__btn__lg w-100" color="primary">
                                Rechercher
                            </button>
                        </div>

                    </div>
                    <div class="row gx-3">
                        <div class="col-xxl-12 col-sm-12 col-12">
                            <div class="table-responsive mb-4">
                                <table class="table table-striped m-0">
                                    <thead>
                                        <tr>
                                            <th>Réf ID</th>
                                            <th>Titre</th>
                                            <th>Auteur</th>
                                            <th>Rubrique</th>
                                            <th>Statut</th>
                                            <th>Date de publication</th>

                                        </tr>
                                    </thead>
                                    <tbody>

                                        @for (article of recente_article | paginate: { itemsPerPage: 20, currentPage: p }; track $index) {

                                            <tr >
                                                <td>
                                                    #{{ $index + 1 }}
                                                    <img
                                                        class="rounded me-2"
                                                        [src]="article.flag"
                                                        alt="Image article quoideneuf"
                                                        style="width: 30px !important; height: 20px !important"
                                                    />
                                                </td>
                                                <td  style="white-space: unset !important;">
                                                    <a [routerLink]="['/web.qdn.view-article',article.slug]" class="text-red  lh-base" >
                                                        {{ article.titre }}
                                                    </a>
                                                </td>
                                                <td>{{ article.author }}</td>
                                                <td>{{ article.rubrique }}</td>
                                                <td class="text-center">
                                                    <span [class]=" article.status == 1?'badge shade-green mb-2 me-4':'badge shade-red mb-2 me-4'">
                                                        {{ article.status == 1?'Publié':'Pas publié'}}
                                                    </span>
                                                </td>
                                                <td class="text-end">
                                                    {{ article.created_at | date: 'd MMMM yyyy, à HH:mm' }}
                                                </td>

                                            </tr>
                                        }


                                    </tbody>
                                </table>
                            </div>

                            <div class="div text-center">
                                <pagination-controls
                                    (pageChange)="p = $event"
                                    previousLabel="Précédent"
                                    nextLabel="Suivant"
                                >

                                </pagination-controls>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- Row end -->
</div>


<ngx-spinner type = "ball-circus" size = "large" color = "#fe0000" [fullScreen] = "true">
    <p style="color: #fff; font-size: 1.2rem" > Chargement en cours... </p>
</ngx-spinner>
